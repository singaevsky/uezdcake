"use strict";(()=>{var e={};e.id=966,e.ids=[966,888,660],e.modules={1323:(e,s)=>{Object.defineProperty(s,"l",{enumerable:!0,get:function(){return function e(s,t){return t in s?s[t]:"then"in s&&"function"==typeof s.then?s.then(s=>e(s,t)):"function"==typeof s&&"default"===t?s:void 0}}})},582:(e,s,t)=>{t.a(e,async(e,r)=>{try{t.r(s),t.d(s,{config:()=>j,default:()=>m,getServerSideProps:()=>p,getStaticPaths:()=>u,getStaticProps:()=>h,reportWebVitals:()=>b,routeModule:()=>_,unstable_getServerProps:()=>N,unstable_getServerSideProps:()=>P,unstable_getStaticParams:()=>v,unstable_getStaticPaths:()=>f,unstable_getStaticProps:()=>g});var l=t(7093),a=t(5244),n=t(1323),c=t(2899),i=t.n(c),d=t(6814),o=t(4179),x=e([d,o]);[d,o]=x.then?(await x)():x;let m=(0,n.l)(o,"default"),h=(0,n.l)(o,"getStaticProps"),u=(0,n.l)(o,"getStaticPaths"),p=(0,n.l)(o,"getServerSideProps"),j=(0,n.l)(o,"config"),b=(0,n.l)(o,"reportWebVitals"),g=(0,n.l)(o,"unstable_getStaticProps"),f=(0,n.l)(o,"unstable_getStaticPaths"),v=(0,n.l)(o,"unstable_getStaticParams"),N=(0,n.l)(o,"unstable_getServerProps"),P=(0,n.l)(o,"unstable_getServerSideProps"),_=new l.PagesRouteModule({definition:{kind:a.x.PAGES,page:"/account",pathname:"/account",bundlePath:"",filename:""},components:{App:d.default,Document:i()},userland:o});r()}catch(e){r(e)}})},4179:(e,s,t)=>{t.a(e,async(e,r)=>{try{t.r(s),t.d(s,{default:()=>h});var l=t(997),a=t(6689),n=t(968),c=t.n(n),i=t(1664),d=t.n(i),o=t(1163),x=t(3673),m=e([x]);x=(m.then?(await m)():m)[0];let h=()=>{let[e,s]=(0,a.useState)(null),[t,r]=(0,a.useState)(!0),n=(0,o.useRouter)();return((0,a.useEffect)(()=>{if(!x.k.isAuthenticated()){n.push("/login");return}let e=x.k.getCurrentUser();e&&s({id:e.id,username:e.username,email:e.email,first_name:e.first_name||"",last_name:e.last_name||"",phone:e.phone||"",bonus_points:e.bonus_points||0,date_joined:e.date_joined||new Date().toISOString()}),r(!1)},[n]),t)?l.jsx("div",{className:"min-h-screen bg-cream flex items-center justify-center",children:l.jsx("div",{className:"text-xl",children:"Загрузка..."})}):e?(0,l.jsxs)("div",{className:"min-h-screen bg-cream",children:[(0,l.jsxs)(c(),{children:[l.jsx("title",{children:"Личный кабинет - Уездный Кондитер"}),l.jsx("meta",{name:"description",content:"Ваш личный кабинет в кондитерской 'Уездный Кондитер'"})]}),(0,l.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,l.jsxs)("div",{className:"mb-8",children:[l.jsx("h1",{className:"text-3xl font-serif font-bold text-chocolate mb-2",children:"Личный кабинет"}),(0,l.jsxs)("p",{className:"text-gray-600",children:["Добро пожаловать, ",e.first_name||e.username,"!"]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[l.jsx("div",{className:"lg:col-span-1",children:(0,l.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6 sticky top-24",children:[(0,l.jsxs)("div",{className:"mb-6 text-center",children:[l.jsx("div",{className:"mx-auto bg-chocolate text-white w-16 h-16 rounded-full flex items-center justify-center text-2xl font-bold mb-3",children:e.first_name?.charAt(0)||e.username.charAt(0)}),l.jsx("h2",{className:"font-bold text-lg",children:e.first_name&&e.last_name?`${e.first_name} ${e.last_name}`:e.username}),l.jsx("p",{className:"text-gray-600 text-sm",children:e.email})]}),l.jsx("nav",{children:(0,l.jsxs)("ul",{className:"space-y-2",children:[l.jsx("li",{children:l.jsx(d(),{href:"/account",className:"block py-2 px-4 bg-rose rounded-lg font-medium text-chocolate",children:"Личные данные"})}),l.jsx("li",{children:l.jsx(d(),{href:"/account/orders",className:"block py-2 px-4 hover:bg-gray-100 rounded-lg",children:"Мои заказы"})}),l.jsx("li",{children:l.jsx(d(),{href:"/account/favorites",className:"block py-2 px-4 hover:bg-gray-100 rounded-lg",children:"Избранное"})}),l.jsx("li",{children:l.jsx(d(),{href:"/account/profile",className:"block py-2 px-4 hover:bg-gray-100 rounded-lg",children:"Настройки профиля"})})]})}),l.jsx("div",{className:"mt-8 pt-6 border-t border-gray-200",children:l.jsx("button",{onClick:()=>{x.k.logout(),n.push("/")},className:"w-full text-left py-2 px-4 text-red-600 hover:bg-red-50 rounded-lg",children:"Выйти"})})]})}),(0,l.jsxs)("div",{className:"lg:col-span-3",children:[(0,l.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6 mb-8",children:[l.jsx("h2",{className:"text-2xl font-bold text-chocolate mb-6",children:"Личные данные"}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,l.jsxs)("div",{children:[l.jsx("h3",{className:"font-semibold mb-2",children:"Имя"}),l.jsx("p",{children:e.first_name||"-"})]}),(0,l.jsxs)("div",{children:[l.jsx("h3",{className:"font-semibold mb-2",children:"Фамилия"}),l.jsx("p",{children:e.last_name||"-"})]}),(0,l.jsxs)("div",{children:[l.jsx("h3",{className:"font-semibold mb-2",children:"Email"}),l.jsx("p",{children:e.email})]}),(0,l.jsxs)("div",{children:[l.jsx("h3",{className:"font-semibold mb-2",children:"Телефон"}),l.jsx("p",{children:e.phone||"-"})]}),(0,l.jsxs)("div",{children:[l.jsx("h3",{className:"font-semibold mb-2",children:"Бонусные баллы"}),l.jsx("p",{className:"text-xl font-bold text-chocolate",children:e.bonus_points})]}),(0,l.jsxs)("div",{children:[l.jsx("h3",{className:"font-semibold mb-2",children:"Дата регистрации"}),l.jsx("p",{children:new Date(e.date_joined).toLocaleDateString("ru-RU",{year:"numeric",month:"long",day:"numeric"})})]})]}),l.jsx("div",{className:"mt-6",children:l.jsx(d(),{href:"/account/profile",className:"btn-secondary inline-block",children:"Редактировать профиль"})})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,l.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6 text-center",children:[l.jsx("div",{className:"text-3xl mb-3",children:"\uD83D\uDCE6"}),l.jsx("h3",{className:"font-bold text-lg mb-2",children:"Мои заказы"}),l.jsx("p",{className:"text-gray-600 mb-4",children:"Просмотр истории заказов"}),l.jsx(d(),{href:"/account/orders",className:"text-chocolate hover:underline",children:"Перейти"})]}),(0,l.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6 text-center",children:[l.jsx("div",{className:"text-3xl mb-3",children:"❤️"}),l.jsx("h3",{className:"font-bold text-lg mb-2",children:"Избранное"}),l.jsx("p",{className:"text-gray-600 mb-4",children:"Сохраненные десерты"}),l.jsx(d(),{href:"/account/favorites",className:"text-chocolate hover:underline",children:"Перейти"})]}),(0,l.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6 text-center",children:[l.jsx("div",{className:"text-3xl mb-3",children:"\uD83C\uDF9F️"}),l.jsx("h3",{className:"font-bold text-lg mb-2",children:"Промокоды"}),l.jsx("p",{className:"text-gray-600 mb-4",children:"Доступные скидки"}),l.jsx(d(),{href:"/promotions",className:"text-chocolate hover:underline",children:"Перейти"})]})]})]})]})]})]}):l.jsx("div",{className:"min-h-screen bg-cream flex items-center justify-center",children:(0,l.jsxs)("div",{className:"text-center",children:[l.jsx("h1",{className:"text-2xl font-bold text-chocolate mb-4",children:"Ошибка загрузки данных"}),l.jsx(d(),{href:"/",className:"text-chocolate hover:underline",children:"← Вернуться на главную"})]})})};r()}catch(e){r(e)}})},5244:(e,s)=>{var t;Object.defineProperty(s,"x",{enumerable:!0,get:function(){return t}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(t||(t={}))},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},968:e=>{e.exports=require("next/head")},6689:e=>{e.exports=require("react")},6405:e=>{e.exports=require("react-dom")},997:e=>{e.exports=require("react/jsx-runtime")},2048:e=>{e.exports=require("fs")},5315:e=>{e.exports=require("path")},6162:e=>{e.exports=require("stream")},1568:e=>{e.exports=require("zlib")},9648:e=>{e.exports=import("axios")}};var s=require("../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[567,424,899,814],()=>t(582));module.exports=r})();