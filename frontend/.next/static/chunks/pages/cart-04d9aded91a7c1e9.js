(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[190],{1742:function(e,s,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/cart",function(){return l(5099)}])},5099:function(e,s,l){"use strict";l.r(s);var t=l(5893),i=l(7294),c=l(9008),n=l.n(c),a=l(1664),r=l.n(a);s.default=()=>{let[e,s]=(0,i.useState)([]),[l,c]=(0,i.useState)(!0);(0,i.useEffect)(()=>{(()=>{try{let e=localStorage.getItem("cart");e&&s(JSON.parse(e))}catch(e){console.error("Ошибка при загрузке корзины",e)}finally{c(!1)}})()},[]),(0,i.useEffect)(()=>{localStorage.setItem("cart",JSON.stringify(e))},[e]);let a=(e,l,t,i)=>{if(i<=0){d(e,l,t);return}s(s=>s.map(s=>s.id===e&&s.weight===l&&JSON.stringify(s.fillings)===JSON.stringify(t)?{...s,quantity:i}:s))},d=(e,l,t)=>{s(s=>s.filter(s=>!(s.id===e&&s.weight===l&&JSON.stringify(s.fillings)===JSON.stringify(t))))},o=()=>e.reduce((e,s)=>e+s.price*s.quantity,0),x=()=>e.reduce((e,s)=>e+s.quantity,0);return l?(0,t.jsx)("div",{className:"min-h-screen bg-cream flex items-center justify-center",children:(0,t.jsx)("div",{className:"text-xl",children:"Загрузка корзины..."})}):(0,t.jsxs)("div",{className:"min-h-screen bg-cream",children:[(0,t.jsxs)(n(),{children:[(0,t.jsx)("title",{children:"Корзина - Уездный Кондитер"}),(0,t.jsx)("meta",{name:"description",content:"Ваша корзина покупок в кондитерской 'Уездный Кондитер'"})]}),(0,t.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-serif font-bold text-chocolate mb-2",children:"Ваша корзина"}),(0,t.jsx)("p",{className:"text-gray-600",children:e.length>0?"В корзине ".concat(x()," товаров на сумму ").concat(o().toLocaleString()," ₽"):"Ваша корзина пуста"})]}),0===e.length?(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-12 text-center",children:[(0,t.jsx)("div",{className:"text-5xl mb-4",children:"\uD83D\uDED2"}),(0,t.jsx)("h2",{className:"text-2xl font-bold text-chocolate mb-4",children:"Корзина пуста"}),(0,t.jsx)("p",{className:"text-gray-600 mb-6",children:"Добавьте в неё что-нибудь вкусное!"}),(0,t.jsx)(r(),{href:"/catalog",className:"btn-primary inline-block",children:"Перейти в каталог"})]}):(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,t.jsx)("div",{className:"lg:col-span-2",children:(0,t.jsx)("div",{className:"bg-white rounded-xl shadow-md overflow-hidden",children:e.map((e,s)=>{var l;return(0,t.jsx)("div",{className:"border-b border-gray-200 last:border-b-0",children:(0,t.jsxs)("div",{className:"p-6 flex flex-col sm:flex-row",children:[(0,t.jsx)("div",{className:"sm:w-1/4 mb-4 sm:mb-0 flex justify-center",children:(0,t.jsx)("img",{src:e.image,alt:e.name,className:"w-32 h-32 object-cover rounded-lg"})}),(0,t.jsxs)("div",{className:"sm:w-3/4 sm:pl-6",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-xl font-bold text-chocolate",children:e.name}),e.weight&&(0,t.jsxs)("p",{className:"text-gray-600",children:["Вес: ",e.weight]}),e.fillings&&e.fillings.length>0&&(0,t.jsxs)("p",{className:"text-gray-600",children:["Начинки: ",e.fillings.join(", ")]})]}),(0,t.jsx)("button",{onClick:()=>d(e.id,e.weight,e.fillings),className:"text-gray-400 hover:text-red-500",children:(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mt-4",children:[(0,t.jsxs)("div",{className:"flex items-center mb-4 sm:mb-0",children:[(0,t.jsx)("span",{className:"mr-3",children:"Количество:"}),(0,t.jsxs)("div",{className:"flex items-center border border-gray-300 rounded",children:[(0,t.jsx)("button",{onClick:()=>a(e.id,e.weight,e.fillings,e.quantity-1),className:"px-3 py-1 text-gray-600 hover:bg-gray-100",children:"-"}),(0,t.jsx)("span",{className:"px-3 py-1",children:e.quantity}),(0,t.jsx)("button",{onClick:()=>a(e.id,e.weight,e.fillings,e.quantity+1),className:"px-3 py-1 text-gray-600 hover:bg-gray-100",children:"+"})]})]}),(0,t.jsxs)("div",{className:"text-xl font-bold text-chocolate",children:[(e.price*e.quantity).toLocaleString()," ₽"]})]})]})]})},"".concat(e.id,"-").concat(e.weight,"-").concat((null===(l=e.fillings)||void 0===l?void 0:l.join("-"))||"no-fillings","-").concat(s))})})}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6 sticky top-24",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-chocolate mb-6",children:"Итого"}),(0,t.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"Товаров:"}),(0,t.jsxs)("span",{children:[x()," шт."]})]}),(0,t.jsxs)("div",{className:"flex justify-between text-xl font-bold",children:[(0,t.jsx)("span",{children:"Сумма:"}),(0,t.jsxs)("span",{children:[o().toLocaleString()," ₽"]})]})]}),(0,t.jsx)(r(),{href:"/checkout",className:"btn-primary w-full py-3 text-center block mb-4",children:"Оформить заказ"}),(0,t.jsx)(r(),{href:"/catalog",className:"text-chocolate hover:underline text-center block",children:"← Продолжить покупки"})]}),(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6 mt-6",children:[(0,t.jsx)("h3",{className:"font-bold text-chocolate mb-3",children:"Промокод"}),(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)("input",{type:"text",placeholder:"Введите промокод",className:"flex-grow p-2 border border-gray-300 rounded-l"}),(0,t.jsx)("button",{className:"bg-gray-200 hover:bg-gray-300 text-gray-800 px-4 py-2 rounded-r",children:"Применить"})]})]})]})]})]})]})}},9008:function(e,s,l){e.exports=l(3867)}},function(e){e.O(0,[888,774,179],function(){return e(e.s=1742)}),_N_E=e.O()}]);